<div class="">
    <div class="breadcrumb">
        <h1>Institution</h1>
    </div>

    <div class="separator-breadcrumb border-top"></div>

    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <input id="keyword" placeholder="Search Institutions" [formControl]="searchControl" class="form-control form-control-rounded" type="text">
            </div>
        </div>
        <div class="col-md-12">
            <div class="card o-hidden">
                <div *ngIf="loading" class="d-flex justify-content-center align-items-center" style="height: 50vh;">
                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                        <span class="spinner-glow spinner-glow-primary mr-5" style="font-size: 3rem;"></span>
                    </div>
                </div>
                <div *ngIf="!loading">
                    <ngx-datatable
                            style="height: calc(100vh - 270px); box-shadow: none"
                            class="material fullscreen"
                            [columnMode]="'force'"
                            [headerHeight]="50"
                            [footerHeight]="0"
                            [rowHeight]="80"
                            [scrollbarV]="true"
                            [scrollbarH]="true"
                            [rows]="institutions | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage, totalItems: totalItems }">
                        <ngx-datatable-column name="name" [width]="250" [maxWidth]="300">
                            <ng-template ngx-datatable-header-template>
                                Name
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="slogan" [width]="300">
                            <ng-template ngx-datatable-header-template>
                                Slogan
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="country">
                            <ng-template ngx-datatable-header-template>
                                Country
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="address">
                            <ng-template ngx-datatable-header-template>
                                Address
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="description">
                            <ng-template ngx-datatable-header-template>
                                Description
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="website">
                            <ng-template ngx-datatable-header-template>
                                Website
                            </ng-template>
                        </ngx-datatable-column>
                    </ngx-datatable>
                </div>
                <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
            </div>
        </div>

        <div class="col-md-12 margin-top-20">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="card-title mb-3">Add</div>
                    <form [formGroup]="addInstitutionForm" (ngSubmit)="addInstitution()">
                        <div class="row">
                            <div class="col-md-6 form-group mb-3">
                                <label for="firstName">Name</label>
                                <input type="text" formControlName="name" class="form-control" id="firstName" placeholder="Enter institution's name">
                                <div *ngIf="shouldShowError('name', 'required')" class="text-danger">
                                    Name is required.
                                </div>
                                <div *ngIf="shouldShowError('name', 'minlength')" class="text-danger">
                                    Name must be at least 3 characters long.
                                </div>
                                <div *ngIf="shouldShowError('name', 'maxlength')" class="text-danger">
                                    Name must be at most 40 characters long.
                                </div>
                            </div>

                            <div class="col-md-6 form-group mb-3">
                                <label for="lastName">Slogan</label>
                                <input type="text" formControlName="slogan" class="form-control" id="lastName" placeholder="Enter institution's slogan">
                                <div *ngIf="shouldShowError('slogan', 'required')" class="text-danger">
                                    Slogan is required.
                                </div>
                                <div *ngIf="shouldShowError('slogan', 'minlength')" class="text-danger">
                                    Slogan must be at least 3 characters long.
                                </div>
                                <div *ngIf="shouldShowError('slogan', 'maxlength')" class="text-danger">
                                    Slogan must be at most 50 characters long.
                                </div>
                            </div>

                            <div class="col-md-6 form-group mb-3">
                                <label for="countrySelect">Country</label>
                                <select formControlName="country" class="form-control form-control" id="countrySelect">
                                    <option *ngFor="let country of countries" [value]="country.country">{{ country.country }}</option>
                                </select>
                                <div *ngIf="shouldShowError('country', 'required')" class="text-danger">
                                    Country is required.
                                </div>
                            </div>

                            <div class="col-md-6 form-group mb-3">
                                <label for="address">Address</label>
                                <input type="text" formControlName="address" class="form-control" id="address" placeholder="Enter institution's address">
                                <div *ngIf="shouldShowError('address', 'required')" class="text-danger">
                                    Address is required.
                                </div>
                                <div *ngIf="shouldShowError('address', 'minlength')" class="text-danger">
                                    Address must be at least 10 characters long.
                                </div>
                                <div *ngIf="shouldShowError('address', 'maxlength')" class="text-danger">
                                    Address must be at most 100 characters long.
                                </div>
                            </div>

                            <div class="col-md-6 form-group mb-3">
                                <label for="description">Description</label>
                                <input type="text" formControlName="description" class="form-control" id="description" placeholder="Enter institution's description">
                                <div *ngIf="shouldShowError('description', 'required')" class="text-danger">
                                    Description is required.
                                </div>
                                <div *ngIf="shouldShowError('description', 'minlength')" class="text-danger">
                                    Description must be at least 10 characters long.
                                </div>
                                <div *ngIf="shouldShowError('description', 'maxlength')" class="text-danger">
                                    Description must be at most 500 characters long.
                                </div>
                            </div>

                            <div class="col-md-6 form-group mb-3">
                                <label for="credit">Website</label>
                                <input formControlName="website" class="form-control" id="credit" placeholder="Web address">
                                <div *ngIf="shouldShowError('website', 'required')" class="text-danger">
                                    Website is required.
                                </div>
                                <div *ngIf="shouldShowError('website', 'minlength')" class="text-danger">
                                    Website must be at least 5 characters long.
                                </div>
                                <div *ngIf="shouldShowError('website', 'maxlength')" class="text-danger">
                                    Website must be at most 100 characters long.
                                </div>
                            </div>

                            <div class="col-md-12">
                                <btn-loading btnClass="btn-primary btn-rounded" [loading]="loading">Submit</btn-loading>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>